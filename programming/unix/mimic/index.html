<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin=anonymous > <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script> <link rel=stylesheet  href="/bidss/libs/highlight/github.min.css"> <link rel=stylesheet  href="/bidss/css/jtd.css"> <link rel=icon  href="/bidss/assets/favicon.ico"> <title>The MIMIC-III Database Demo</title> <header> <a class=skip_main  href="#main">Skip to main content</a> <nav class="navbar navbar-expand-lg navbar-light nav-main"> <!-- <button class="navbar-toggler custom-toggler" type=button  data-toggle=collapse  data-target="#navbarContents" aria-expanded=false  aria-label="Toggle navigation"> <span class=navbar-toggler-icon ></span> </button> --> <div class=logo-box > <a href="#"><img class=img-logo  src="/bidss/assets/bidss_logo.png" alt = "BIDSS"></a> </div> <div class=nav-middleitems-wrapper > <div class=nav-middleitems-header > <!-- <div class=nav-middleitem  style="border-bottom-color: transparent;"> <a class=nav-middleitem-button  target=_blank  rel="noopener noreferrer" href="#"> <span class=nav-middleitem-text >Home</span> </a> </div> --> <!-- <div class=nav-middleitem  style="border-bottom-color: transparent;"> <a class=nav-middleitem-button  target=_blank  rel="noopener noreferrer" href="#"> <span class=nav-middleitem-text >Getting Started</span> </a> </div> --> <!-- <div class=nav-middleitem  style="border-bottom-color: transparent;"> <a class=nav-middleitem-button  target=_blank  rel="noopener noreferrer" href="#"> <span class=nav-middleitem-text >Documentation</span> </a> </div> --> <!-- <div class=nav-middleitem  style="border-bottom-color: transparent;"> <a class=nav-middleitem-button  target=_blank  rel="noopener noreferrer" href="#"> <span class=nav-middleitem-text >GitHub</span> </a> </div> --> </div> </div> <div class=searchbox-wrapper > <div class=searchbox-container > <div aria-label="" class=searchbox-input-wrapper > <div class=searchbox-input-inner > <input placeholder=Search...  type=text  class=searchbox-input-box > </div> <div class=searchbox-icon > <svg preserveAspectRatio="xMidYMid meet" height=1em  width=1em  fill=none  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width=2  stroke-linecap=round  stroke-linejoin=round  stroke=currentColor  class=searchbox-iconsvg > <g> <circle cx=10.5  cy=10.5  r=7.5 > </circle> <line x1="21" y1="21" x2="15.8" y2="15.8"></line> </g> </svg> </div> </div> </div> </div> </nav> </header> <div class=page-wrap > <div class=sidenav > <div class=sidenav-wrap > <ul class=menu-list > <li class=menu-list-item ><a href="/bidss/" class="menu-list-link "><b>1</b> Home</a> <div class=section-title >Infrastructure</div> <li class="menu-list-item "><a href="/bidss/programming/setup/intro/" class="menu-list-link "><b>2</b> Setup</a> <ul class="menu-list-child-list "> <li class=menu-list-item ><a href="/bidss/programming/setup/intro/" class="menu-list-link "><b>2.1</b> Overview</a> <li class=menu-list-item ><a href="/bidss/programming/setup/wsl/" class="menu-list-link "><b>2.2</b> Linux for Windows</a> <li class=menu-list-item ><a href="/bidss/programming/setup/julia/" class="menu-list-link "><b>2.3</b> Julia</a> <li class=menu-list-item ><a href="/bidss/programming/setup/r/" class="menu-list-link "><b>2.4</b> R</a> <li class=menu-list-item ><a href="/bidss/programming/setup/vscode/" class="menu-list-link "><b>2.5</b> VS Code</a> <li class=menu-list-item ><a href="/bidss/programming/setup/filezilla/" class="menu-list-link "><b>2.6</b> FileZilla</a> </ul> <div class=section-title >Programming</div> <li class="menu-list-item active"><a href="/bidss/programming/unix/intro/" class="menu-list-link active"><b>3</b> Unix</a> <ul class="menu-list-child-list "> <li class=menu-list-item ><a href="/bidss/programming/unix/intro/" class="menu-list-link "><b>3.1</b> Getting Started with Unix</a> <li class=menu-list-item ><a href="/bidss/programming/unix/census/" class="menu-list-link "><b>3.2</b> Analyzing the Adult (Census Income) Data Set</a> <li class=menu-list-item ><a href="/bidss/programming/unix/mimic/" class="menu-list-link active"><b>3.3</b> Analyzing the MIMIC-III Demo Data Set</a> </ul> <li class="menu-list-item "><a href="/bidss/programming/db/mysql/" class="menu-list-link "><b>4</b> Databases</a> <ul class="menu-list-child-list "> <li class=menu-list-item ><a href="/bidss/programming/db/mysql/" class="menu-list-link "><b>4.1</b> Getting Started with Databases</a> <li class=menu-list-item ><a href="/bidss/programming/db/emrbots/" class="menu-list-link "><b>4.2</b> Querying the EMRbots Database</a> <li class=menu-list-item ><a href="/bidss/programming/db/mimic/" class="menu-list-link "><b>4.3</b> Querying the MIMIC-III Demo Database</a> </ul> <li class="menu-list-item "><a href="/bidss/programming/computing/intro/" class="menu-list-link "><b>5</b> Scientific Computing</a> <ul class="menu-list-child-list "> <li class=menu-list-item ><a href="/bidss/programming/computing/intro/" class="menu-list-link "><b>5.1</b> Getting Started with Scientific Computing</a> <li class=menu-list-item ><a href="/bidss/programming/computing/numbers/" class="menu-list-link "><b>5.2</b> Numbers and Math</a> <li class=menu-list-item ><a href="/bidss/programming/computing/strings/" class="menu-list-link "><b>5.3</b> Strings, Characters, and Regular Expressions</a> <li class=menu-list-item ><a href="/bidss/programming/computing/control/" class="menu-list-link "><b>5.4</b> Control Flow</a> <li class=menu-list-item ><a href="/bidss/programming/computing/collections/" class="menu-list-link "><b>5.5</b> Collections and Data Structures</a> <li class=menu-list-item ><a href="/bidss/programming/computing/io/" class="menu-list-link "><b>5.6</b> File Input/Output</a> <li class=menu-list-item ><a href="/bidss/programming/computing/repl/" class="menu-list-link "><b>5.7</b> REPL and Packages</a> <li class=menu-list-item ><a href="/bidss/programming/computing/dataframes/" class="menu-list-link "><b>5.8</b> DataFrames</a> <li class=menu-list-item ><a href="/bidss/programming/computing/stats/" class="menu-list-link "><b>5.9</b> Statistics and Machine Learning</a> <li class=menu-list-item ><a href="/bidss/programming/computing/viz/" class="menu-list-link "><b>5.10</b> Plotting and Visualization</a> </ul> <div class=section-title >Informatics Software</div> <div class=section-title >Data Sources</div> <div class=section-title >Electronic Health Records</div> <div class=section-title >Standards</div> <div class=section-title >Informatics Theory</div> <div class=section-title >Course Outlines</div> <li class="menu-list-item "><a href="/bidss/courses/intro/" class="menu-list-link "><b>11</b> Course Materials</a> <ul class="menu-list-child-list "> <li class=menu-list-item ><a href="/bidss/courses/4day" class="menu-list-link "><b>11.1</b> Four-Day Short Course</a> </ul> </ul> </div> <div class=footer > <a href = "https://www.brown.edu/academics/medical/about-us/research/centers-institutes-and-programs/biomedical-informatics/" target=_blank > <img src="/bidss/assets/bcbi_logo.png" alt = "Brown Center for Biomedical Informatics" class=bcbi-logo > </a> </div> </div> <div class=main > <div class=franklin-content ><h1 id=33_the_mimic-iii_database_demo ><a href="#33_the_mimic-iii_database_demo">3.3 The MIMIC-III Database Demo</a></h1> <div class=franklin-toc ><ol><li><a href="#documentation">Documentation</a><li><a href="#analyzing_the_mimic-iii_database_demo">Analyzing the MIMIC-III Database Demo</a><ol><li><a href="#getting_started">Getting Started</a><li><a href="#explore_the_data_files">Explore the Data Files</a></ol><li><a href="#exercises">Exercises</a></ol></div> <h2 id=documentation ><a href="#documentation">Documentation</a></h2> <ul> <li><p>MIMIC-III Demo: <a href="https://physionet.org/content/mimiciii-demo/1.4/" target=_blank >Database information and data download</a> </p> </ul> <h2 id=analyzing_the_mimic-iii_database_demo ><a href="#analyzing_the_mimic-iii_database_demo">Analyzing the MIMIC-III Database Demo</a></h2> <h3 id=getting_started ><a href="#getting_started">Getting Started</a></h3> <ol> <li><p>Download the following files</p> </ol> <ul> <li><p> <a href="https://physionet.org/content/mimiciii-demo/1.4/PATIENTS.csv" target=_blank >Admissions.csv</a> </p> <li><p> <a href="https://physionet.org/content/mimiciii-demo/1.4/ADMISSIONS.csv" target=_blank >Patients.csv</a> </p> <li><p> <a href="https://physionet.org/content/mimiciii-demo/1.4/DIAGNOSES_ICD.csv" target=_blank >Diagnoses_ICD.csv</a> </p> </ul> <ol start=2 > <li><p>Move files to a working directory &#40;see <a href="/bidss/programming/unix/intro">3.1 Getting Started</a> for more detail&#41;</p> <li><p>Open a Unix shell and navigate to that directory &#40;see <a href="/bidss/programming/unix/intro">3.1 Getting Started</a> for more detail&#41;</p> </ol> <h3 id=explore_the_data_files ><a href="#explore_the_data_files">Explore the Data Files</a></h3> <p>Confirm that your data files are in your present working directory:</p> <pre><code class=language-julia >$ ls -1
ADMISSIONS.csv
DIAGNOSES_ICD.csv
PATIENTS.csv</code></pre> <p>Count number of lines in file &#40;PATIENTS.csv&#41; using wc: </p> <pre><code class=language-julia >$ wc PATIENTS.csv
     101     448    8605 PATIENTS.csv
$ wc -l PATIENTS.csv
     101 PATIENTS.csv</code></pre> <p>Look at contents of a text file &#40;PATIENTS.csv&#41; to fill a screen using more or less: &#40;Use spacebar or up and down arrows to scroll through pages and then press q to quit&#41;</p> <pre><code class=language-julia >$ more PATIENTS.csv
$ less PATIENTS.csv</code></pre> <p>Look at first and last lines of a text file &#40;PATIENTS.csv&#41; to fill a screen using head or tail:</p> <pre><code class=language-julia >$ head PATIENTS.csv
$ tail PATIENTS.csv</code></pre> <p>Look at first line and last three lines of a text file &#40;ADMISSIONS.csv&#41; using head or tail:</p> <pre><code class=language-julia >$ head -n 1 ADMISSIONS.csv
row_id,subject_id,gender,dob,dod,dod_hosp,dod_ssn,expire_flag
$ tail -n 3 ADMISSIONS.csv
41087,44212,163189,2123-11-24 14:14:00,2123-12-30 14:31:00,,EMERGENCY,TRANSFER FROM HOSP/EXTRAM,REHAB/DISTINCT PART HOSP,Medicare,ENGL,UNOBTAINABLE,SINGLE,BLACK/AFRICAN AMERICAN,,,ACUTE RESPIRATORY DISTRESS SYNDROME;ACUTE RENAL FAILURE,0,1
41090,44222,192189,2180-07-19 06:55:00,2180-07-20 13:00:00,,EMERGENCY,EMERGENCY ROOM ADMIT,HOME,Medicare,ENGL,CATHOLIC,SINGLE,WHITE,2180-07-19 04:50:00,2180-07-19 08:23:00,BRADYCARDIA,0,1
41092,44228,103379,2170-12-15 03:14:00,2170-12-24 18:00:00,,EMERGENCY,EMERGENCY ROOM ADMIT,HOME HEALTH CARE,Private,ENGL,NOT SPECIFIED,SINGLE,WHITE,2170-12-15 02:22:00,2170-12-15 05:25:00,CHOLANGITIS,0,1</code></pre> <p>Extract a specific field &#40;10&#41; from a delimited file using cut &#40;tab is default delimiter&#41;:</p> <pre><code class=language-julia >$ cut -f10 -d',' ADMISSIONS.csv</code></pre>
<p>Extract a specific field &#40;10&#41; from a delimited file using cut &#40;tab is default delimiter&#41; and review output:</p>
<pre><code class=language-julia >$ cut -f10 -d',' ADMISSIONS.csv | more
insurance
Medicare
Private
Medicare
...</code></pre>
<p>Another solution to the above using awk:</p>
<pre><code class=language-julia >$ awk -F"," '{print $10}' ADMISSIONS.csv
insurance
Medicare
Private
Medicare
...</code></pre>
<p>Extract a specific field &#40;10&#41; from a delimited file using cut &#40;tab is default delimiter&#41; and review first five rows:</p>
<pre><code class=language-julia >$ cut -f10 -d',' ADMISSIONS.csv | head -n 5
insurance
Medicare
Private
Medicare
Medicare</code></pre>
<p>Extract specific fields &#40;2,3,10&#41; from a delimited file using cut &#40;tab is default delimiter&#41; and review output:</p>
<pre><code class=language-julia >$ cut -f2,3,10 -d',' ADMISSIONS.csv
subject_id,hadm_id,insurance
10006,142345,Medicare
10011,105331,Private
10013,165520,Medicare
...</code></pre>
<p>Another solution to the above using awk &#40;also skip header line and separate fields with ‘|’ delimiter&#41;</p>
<pre><code class=language-julia >$ awk -F"," 'NR!=1{print $2,$3,$10}' OFS="|" ADMISSIONS.csv |more
10006|142345|Medicare
10011|105331|Private
10013|165520|Medicare
...</code></pre>
<p>Combine cut, sort, and uniq to determine how many times each value in field 10 occurs: &#40;Need to sort first, so that uniq will be able to correctly tabulate values; command only remembers most recent row and current total counts&#41;</p>
<pre><code class=language-julia >$ cut -f10 -d',' ADMISSIONS.csv | sort | uniq -c
   1 Government
   6 Medicaid
  98 Medicare
  24 Private
   1 insurance</code></pre>
<p>Sort in numerical order:</p>
<pre><code class=language-julia >$ cut -f10 -d',' ADMISSIONS.csv | sort | uniq -c | sort -r
  98 Medicare
  24 Private
   6 Medicaid
   1 insurance
   1 Government</code></pre>
<p>Retrieve rows that contain a particular phrase using grep &#40;MacOS/Linux&#41; or select-string &#40;Windows&#41;:</p>
<pre><code class=language-julia >$ grep "DIVORCED" ADMISSIONS.csv
12269,10017,199207,2149-05-26 17:19:00,2149-06-03 18:42:00,,EMERGENCY,EMERGENCY ROOM ADMIT,SNF,Medicare,,CATHOLIC,DIVORCED,WHITE,2149-05-26 12:08:00,2149-05-26 19:45:00,HUMERAL FRACTURE,0,1
12270,10019,177759,2163-05-14 20:43:00,2163-05-15 12:00:00,2163-05-15 12:00:00,EMERGENCY,TRANSFER FROM HOSP/EXTRAM,DEAD/EXPIRED,Medicare,,CATHOLIC,DIVORCED,WHITE,,,ALCOHOLIC HEPATITIS,1,1
12280,10029,132349,2139-09-22 10:58:00,2139-10-02 14:29:00,,EMERGENCY,EMERGENCY ROOM ADMIT,SNF,Medicare,,PROTESTANT QUAKER,DIVORCED,WHITE,2139-09-22 06:03:00,2139-09-22 11:50:00,SYNCOPE;TELEMETRY,0,1
12363,10112,188574,2148-01-13 22:32:00,2148-01-19 15:03:00,2148-01-19 15:03:00,URGENT,TRANSFER FROM HOSP/EXTRAM,DEAD/EXPIRED,Medicare,,PROTESTANT QUAKER,DIVORCED,WHITE,,,VF ARREST ,1,1
39859,40286,109698,2193-10-15 07:15:00,2193-10-20 13:18:00,,ELECTIVE,PHYS REFERRAL/NORMAL DELI,REHAB/DISTINCT PART HOSP,Medicare,ENGL,PROTESTANT QUAKER,DIVORCED,WHITE,,,LEFT HIP OA/SDA,0,1
39929,40503,168803,2186-07-06 19:59:00,2186-07-07 19:00:00,2186-07-07 19:00:00,EMERGENCY,TRANSFER FROM HOSP/EXTRAM,DEAD/EXPIRED,Medicare,ENGL,UNOBTAINABLE,DIVORCED,WHITE,,,STEMI;,1,1</code></pre>
<p>Get the subject identifier &#40;field 2&#41;, admission identifier &#40;field 3&#41;, insurance &#40;field 10&#41; and diagnosis &#40;field 17&#41; for the above:</p>
<pre><code class=language-julia >$ grep DIVORCED ADMISSIONS.csv | cut -f2,3,10,17 -d','
10017,199207,Medicare,HUMERAL FRACTURE
10019,177759,Medicare,ALCOHOLIC HEPATITIS
10029,132349,Medicare,SYNCOPE;TELEMETRY
10112,188574,Medicare,VF ARREST
40286,109698,Medicare,LEFT HIP OA/SDA
40503,168803,Medicare,STEMI;</code></pre>
<p>Find admission times from the year 2112:</p>
<pre><code class=language-julia >$ cut -d',' -f4 ADMISSIONS.csv | grep "2112"
2112-02-04 14:49:00
2112-05-04 08:00:00
2112-05-22 15:37:00
2112-05-28 15:45:00</code></pre>
<p>Add “ADMISSIONS:” to the beginning of each line using sed:</p>
<pre><code class=language-julia >$ sed 's/^/ADMISSION:/' ADMISSIONS.csv
ADMISSION:row_id,subject_id,hadm_id,admittime,dischtime,deathtime,admission_type,admission_location,discharge_location,insurance,language,religion,marital_status,ethnicity,edregtime,edouttime,diagnosis,hospital_expire_flag,has_chartevents_data
ADMISSION:12258,10006,142345,2164-10-23 21:09:00,2164-11-01 17:15:00,,EMERGENCY,EMERGENCY ROOM ADMIT,HOME HEALTH CARE,Medicare,,CATHOLIC,SEPARATED,BLACK/AFRICAN AMERICAN,2164-10-23 16:43:00,2164-10-23 23:00:00,SEPSIS,0,1
ADMISSION:12263,10011,105331,2126-08-14 22:32:00,2126-08-28 18:59:00,2126-08-28 18:59:00,EMERGENCY,TRANSFER FROM HOSP/EXTRAM,DEAD/EXPIRED,Private,,CATHOLIC,SINGLE,UNKNOWN/NOT SPECIFIED,,,HEPATITIS B,1,1</code></pre>
<p>Replace “EMERGENCY ROOM” with “ER” and “SNF” with “SKILLED NURSING FACILITY” using sed:</p>
<pre><code class=language-julia >$ cut -d',' -f7,8,9 ADMISSIONS.csv |more
admission_type,admission_location,discharge_location
EMERGENCY,EMERGENCY ROOM ADMIT,HOME HEALTH CARE
EMERGENCY,TRANSFER FROM HOSP/EXTRAM,DEAD/EXPIRED
EMERGENCY,TRANSFER FROM HOSP/EXTRAM,DEAD/EXPIRED
EMERGENCY,EMERGENCY ROOM ADMIT,SNF

$ cut -d',' -f7,8,9 ADMISSIONS.csv | sed 's/EMERGENCY ROOM/ER/g' | sed 's/SNF/SKILLED NURSING FACILITY/'
admission_type,admission_location,discharge_location
EMERGENCY,ER ADMIT,HOME HEALTH CARE
EMERGENCY,TRANSFER FROM HOSP/EXTRAM,DEAD/EXPIRED
EMERGENCY,TRANSFER FROM HOSP/EXTRAM,DEAD/EXPIRED
EMERGENCY,ER ADMIT,SKILLED NURSING FACILITY</code></pre>
<h2 id=exercises ><a href="#exercises">Exercises</a></h2>
<ol>
<li><p>Determine number of lines that have the value “ENGL”</p>

</ol>
<pre><code class=language-julia >$ YOUR COMMAND
      58     537   11802</code></pre>
<ol start=2 >
<li><p>Determine number of times each value in the discharge location field occurs</p>

</ol>
<pre><code class=language-julia >$ YOUR COMMAND
  40 DEAD/EXPIRED
  39 SNF
  15 HOME
  14 HOME HEALTH CARE -
  13 REHAB/DISTINCT PART HOSP
   3 ICF
   2 LONG TERM CARE HOSPITAL
   1 discharge_location
   1 HOSPICE-HOME
   1 HOME WITH HOME IV PROVIDR
   1 DISCH-TRAN TO PSYCH HOSP</code></pre>
<ol start=3 >
<li><p>Determine how many times each year in the admission time field occurs</p>

</ol>
<pre><code class=language-julia >$ YOUR COMMAND
   5 2201
   4 2202
   3 2200
   3 2145
   3 2112
   ...</code></pre><div class=page-foot >
  <div class=copyright >
    <small>
      &copy; <a href="https://github.com/bcbi">Brown Center for Biomedical Informatics (BCBI) at Brown University</a>. Last updated: July 24, 2020. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>. Powered by the <a href="https://julialang.org">Julia programming language</a>.
    </small>
  </div>
</div>
</div>
    </div> 
    </div> <!-- end of class page-wrap-->
    
    
      <script src="/bidss/libs/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script>

    
  



<script>
$(window).scroll(function() {
  var scrollTop = $(window).scrollTop();
  if (scrollTop <= 80)
      $('.sidenav').css('top', 80 - scrollTop);
  else
      $('.sidenav').css('top', 0);
});
</script>